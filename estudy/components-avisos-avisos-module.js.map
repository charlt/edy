{"version":3,"sources":["webpack:///./src/app/components/avisos/avisos-routing.module.ts","webpack:///./src/app/components/avisos/avisos.component.html","webpack:///./src/app/components/avisos/avisos.component.scss","webpack:///./src/app/components/avisos/avisos.component.ts","webpack:///./src/app/components/avisos/avisos.module.ts"],"names":[],"mappings":"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","file":"components-avisos-avisos-module.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\nimport { AvisosComponent } from './avisos.component';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path:'',\r\n    component: AvisosComponent\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class AvisosRoutingModule { }\r\n","module.exports = \"  <div class=\\\"container mt-3\\\">\\r\\n    <div class=\\\"row\\\">\\r\\n    <div class=\\\"col-12\\\">\\r\\n      <h4>{{title}}</h4>\\r\\n      <div class=\\\"btn-group\\\" role=\\\"group\\\" aria-label=\\\"Basic example\\\">\\r\\n        <button type=\\\"button\\\" [ngClass]=\\\"nuevo == 1 ? 'active':''\\\" (click)=\\\"consultaAvisos(1)\\\" class=\\\"btn btn-info\\\">Vigentes</button>\\r\\n        <button type=\\\"button\\\" [ngClass]=\\\"nuevo == 2 ? 'active':''\\\" (click)=\\\"consultaAvisos(2)\\\"   class=\\\"btn btn-info\\\">Otros</button>\\r\\n      </div>\\r\\n      </div>\\r\\n    </div>\\r\\n    <div class=\\\"row\\\" *ngIf=\\\"cargandoAvisos\\\">\\r\\n      <div class=\\\"col-12 mt-5\\\">\\r\\n        <p><i class=\\\"fa fa-spin fa-spinner\\\"></i> Cargando informaci√≥n</p>\\r\\n      </div>\\r\\n    </div>\\r\\n    <div class=\\\"row\\\" *ngIf=\\\"!avisos\\\">\\r\\n      <div class=\\\"col-12 mt-5\\\">\\r\\n        <p>No se encontraron avisos</p>\\r\\n      </div>\\r\\n    </div>\\r\\n    <div class=\\\"row\\\" *ngIf=\\\"!cargandoAvisos\\\">\\r\\n      <div class=\\\"col-12\\\">\\r\\n        <div class=\\\"card  mt-5\\\" *ngFor=\\\"let aviso of avisos; let i = index\\\">\\r\\n          <div class=\\\"card-header \\\" [ngClass]=\\\"!aviso.visto ? 'alert-success' : ''\\\">\\r\\n            <p>{{aviso.tipo_descripcion}} <strong>{{aviso.nombre_materia}}</strong></p>\\r\\n          </div>\\r\\n          <div class=\\\"card-body\\\">\\r\\n            <div class=\\\"row\\\">\\r\\n              <div class=\\\"col-6\\\">\\r\\n                <h5>{{aviso.titulo}}</h5>\\r\\n              </div>\\r\\n              <div class=\\\"col-6\\\">\\r\\n                <label class=\\\"form-check-label float-right\\\" >\\r\\n                  <input (change)=\\\"marcarAviso(aviso)\\\" class=\\\"form-check-input\\\" type=\\\"checkbox\\\"  [checked]=\\\"aviso.visto == 1\\\">\\r\\n                  Marcar como visto\\r\\n                </label>\\r\\n              </div>  \\r\\n                <div class=\\\"col-12\\\">\\r\\n                  <app-archivo class=\\\"archivo\\\" *ngIf=\\\"aviso.adjunto\\\" [urlBase]=\\\"aviso.adjunto\\\"></app-archivo>\\r\\n                  <p [innerHTML]=\\\"aviso.mensaje_html\\\" ></p>\\r\\n                </div>\\r\\n            </div>\\r\\n          </div>\\r\\n          <div class=\\\"card-footer text-muted text-center\\\">\\r\\n            {{aviso.fecha_inicio  | date: \\\"dd/MM/yyyy\\\"}} - {{aviso.fecha_fin  | date: \\\"dd/MM/yyyy\\\"}}\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n\\r\\n    </div>\\r\\n</div>      \\r\\n      \"","module.exports = \".aviso {\\n  cursor: pointer;\\n  color: #3485f0;\\n  text-decoration: underline; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvY29tcG9uZW50cy9hdmlzb3MvQzpcXHhhbXBwMVxcaHRkb2NzXFxlc3R1ZHlfbmV3XFxmcm9udEVzdHVkeS9zcmNcXGFwcFxcY29tcG9uZW50c1xcYXZpc29zXFxhdmlzb3MuY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDSSxnQkFBYztFQUNkLGVBQWM7RUFDZCwyQkFBMEIsRUFDN0IiLCJmaWxlIjoic3JjL2FwcC9jb21wb25lbnRzL2F2aXNvcy9hdmlzb3MuY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuYXZpc297XHJcbiAgICBjdXJzb3I6cG9pbnRlcjtcclxuICAgIGNvbG9yOiAjMzQ4NWYwO1xyXG4gICAgdGV4dC1kZWNvcmF0aW9uOiB1bmRlcmxpbmU7XHJcbn1cclxuIl19 */\"","import { Component, OnInit } from '@angular/core';\r\nimport { UsuarioService } from 'src/app/services/usuario.service';\r\nimport { NgbModal } from '@ng-bootstrap/ng-bootstrap';\r\nimport { SafeHtml, DomSanitizer } from '@angular/platform-browser';\r\nimport { AvisosService } from './avisos.service';\r\nimport { MateriaService } from 'src/app/services/materia.service';\r\nimport { ActivatedRoute } from '@angular/router';\r\n\r\ndeclare var alertify;\r\n\r\n@Component({\r\n  selector: 'app-avisos',\r\n  templateUrl: './avisos.component.html',\r\n  styleUrls: ['./avisos.component.scss']\r\n})\r\nexport class AvisosComponent implements OnInit {\r\n  title: string;\r\n  jwt;\r\n  \r\n  avisos;\r\n  nuevo = 1;\r\n  cargandoAvisos = false;\r\n  tipo;\r\n  idMateria = null;\r\n  idRol;\r\n  \r\n  \r\n  constructor(\r\n    private _usuarioService:UsuarioService,\r\n    private _avisosService: AvisosService,\r\n    private _sanitizer: DomSanitizer,\r\n    private _materia: MateriaService,\r\n    private route: ActivatedRoute,\r\n  ){\r\n    this.title= \"Mis Avisos\";\r\n    this._usuarioService.pushBreadcum(this.title,\"\",1);\r\n    this.tipo = this.route.snapshot.paramMap.get('id'); \r\n    if(this.tipo == 2){\r\n      this.idMateria = this._materia.getSelectedMateria().materia_id\r\n    }\r\n\r\n    this.idRol = this._usuarioService.getIdentity().rol_id;\r\n   }\r\n\r\n  ngOnInit() {\r\n    \r\n    this.consultaAvisos(1);\r\n  }\r\n\r\n\r\n  consultaAvisos(nuevo){\r\n    this.nuevo = nuevo;\r\n    this.cargandoAvisos = true;\r\n    this._avisosService.consulta(this.nuevo,this.idMateria,this.idRol).subscribe(\r\n      response =>{\r\n          if (response && response['status']){            \r\n            let avisos = response['avisos'];\r\n            avisos.forEach(function(_aviso){\r\n              _aviso.visto = parseInt(_aviso.visto);\r\n              _aviso.mensaje_html = this.htmlProperty(_aviso.mensaje)\r\n              _aviso.fecha_inicio = _aviso.fecha_inicio ? new Date(_aviso.fecha_inicio*1000) : null;\r\n              _aviso.fecha_fin =  _aviso.fecha_fin ? new Date(_aviso.fecha_fin*1000) : null;\r\n            }.bind(this));\r\n\r\n            this.avisos = avisos;\r\n            this.cargandoAvisos = false;\r\n            \r\n          }else{\r\n            this.avisos = null;\r\n            this.cargandoAvisos = false;\r\n          }\r\n      },error =>{\r\n        console.log(<any>error)\r\n    });\r\n  }\r\n\r\n  htmlProperty(html) : SafeHtml {\r\n    \r\n    return this._sanitizer.bypassSecurityTrustHtml(html);\r\n  }\r\n\r\n\r\n marcarAviso(aviso,index) {\r\n    if(aviso.visto == 1){\r\n      aviso.visto = 0;\r\n    }\r\n    else if(aviso.visto == 0){\r\n      aviso.visto = 1;\r\n      this._avisosService.cambiaAvisoEstatus(aviso.aviso_id);\r\n    }\r\n    this._avisosService.marcarAvisos(aviso.aviso_id,aviso.tipo,aviso.visto).subscribe(response => {\r\n      if (response && response['status']){          \r\n        this.avisos[index] = aviso.visto;\r\n        alertify.success(response['msg']).dismissOthers();\r\n        }\r\n    }, error => {\r\n        console.log(<any>error);\r\n    });        \r\n  }\r\n}","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\n\r\nimport { AvisosRoutingModule } from './avisos-routing.module';\r\nimport { AvisosComponent } from './avisos.component';\r\nimport { ArchivoModule } from 'src/app/components/archivo/archivo.module';\r\n\r\n\r\n@NgModule({\r\n  declarations: [AvisosComponent],\r\n  imports: [\r\n    CommonModule,\r\n    AvisosRoutingModule,\r\n    ArchivoModule,\r\n  ],\r\n  exports:[AvisosComponent]\r\n})\r\nexport class AvisosModule { }\r\n"],"sourceRoot":""}