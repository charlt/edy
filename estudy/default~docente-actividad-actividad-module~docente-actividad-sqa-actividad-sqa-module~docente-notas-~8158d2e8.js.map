{"version":3,"sources":["webpack:///./src/app/docente/notas/notas-routing.module.ts","webpack:///./src/app/docente/notas/notas.component.html","webpack:///./src/app/docente/notas/notas.component.scss","webpack:///./src/app/docente/notas/notas.component.ts","webpack:///./src/app/docente/notas/notas.module.ts","webpack:///./src/app/docente/notas/services/notas.service.ts"],"names":[],"mappings":"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","file":"default~docente-actividad-actividad-module~docente-actividad-sqa-actividad-sqa-module~docente-notas-~8158d2e8.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\nimport { NotasComponent } from './notas.component';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '', component: NotasComponent\r\n  } \r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class NotasRoutingModule { }\r\n","module.exports = \"<div class=\\\"row\\\">\\r\\n<div class=\\\"col-md-6\\\">\\r\\n  <h5 *ngIf=\\\"alumno\\\">Notas de {{alumno.nombre}} {{alumno.primer_apellido}} {{alumno.segundo_apellido}}  </h5>\\r\\n  <h4 *ngIf=\\\"actividad\\\" class=\\\"text-info\\\">{{actividad.actividad_nombre}}</h4>\\r\\n  \\r\\n    <div class=\\\"form-group\\\" >\\r\\n      <ckeditor [config]=\\\"{toolbar: simpleEditor, extraPlugins: 'justify'}\\\" [(ngModel)]=\\\"texto\\\" name=\\\"notas\\\" id=\\\"notas\\\"></ckeditor>\\r\\n    </div>\\r\\n    <div class=\\\"row\\\">\\r\\n    <div class=\\\"col-md-12\\\">\\r\\n        <button type=\\\"submit\\\" class=\\\"btn btn-success pull-right\\\" (click)=\\\"enviar(texto)\\\">Enviar</button>\\r\\n    </div>\\r\\n    </div>\\r\\n  </div>\\r\\n\\r\\n    <div class=\\\"col-md-6 \\\">\\r\\n      <h4>Mis notas</h4>\\r\\n      <div class=\\\"alert alert-secondary\\\" role=\\\"alert\\\" *ngIf=\\\"!nota\\\" >\\r\\n        No tienes notas de este alumno\\r\\n      </div>\\r\\n        <div class=\\\"alert alert-secondary\\\" role=\\\"alert\\\" *ngFor=\\\"let _nota of nota; let i = index \\\" >\\r\\n            <button class=\\\"btn btn-light btn-accion pull-right btn-sm\\\" (click)=\\\"eliminaNotas(_nota.nota_id,i)\\\"><i class=\\\"fa fa-times\\\"></i></button>\\r\\n            <p [innerHtml]=\\\"_nota.texto\\\"></p> \\r\\n        </div>\\r\\n      </div>\\r\\n</div>\\r\\n\\r\\n    \\r\\n\"","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2RvY2VudGUvbm90YXMvbm90YXMuY29tcG9uZW50LnNjc3MifQ== */\"","import { Component, OnInit, Input } from '@angular/core';\r\nimport { UsuarioService } from 'src/app/services/usuario.service';\r\nimport { NotasService } from './services/notas.service';\r\nimport {  ActivatedRoute } from '@angular/router';\r\nimport { simpleEditor} from '../../../../../frontEstudy/src/app/models/simpleEditor';\r\nimport { ActividadService } from 'src/app/materia/actividad/services/actividad.service';\r\nimport { AlumnoService } from 'src/app/administracion/alumno/services/alumno.service';\r\nimport { MateriaService } from 'src/app/services/materia.service';\r\n\r\ndeclare var alertify;\r\n\r\n@Component({\r\n  selector: 'app-notas',\r\n  templateUrl: './notas.component.html',\r\n  styleUrls: ['./notas.component.scss']\r\n})\r\nexport class NotasComponent implements OnInit {\r\n\r\n  title: string;\r\n  jwt;\r\n  idActividad;\r\n  idMateria;\r\n  idDocente;\r\n  idNota=null;\r\n  texto;\r\n  nota;\r\n  // idMateriaFechaActividad;\r\n  fechaActividad;\r\n  identity;\r\n  alumno;\r\n  actividad;\r\n\r\n\r\n\r\n  simpleEditor = simpleEditor;\r\n\r\n\r\n  constructor(\r\n    private _usuarioService: UsuarioService,\r\n    private _notasService: NotasService,\r\n    private _actividadService: ActividadService,\r\n    private _materiaService: MateriaService,\r\n    private route: ActivatedRoute,\r\n  ) {\r\n    this.title = 'Mis notas';\r\n    this._usuarioService.pushBreadcum(this.title,\"\",2);\r\n    this.idMateria = this.route.snapshot.params['id'];\r\n    this.idActividad = this.route.snapshot.params['id2'];\r\n    \r\n   }\r\n\r\n  ngOnInit() {\r\n\r\n    this.jwt = this._usuarioService.getJWT();\r\n\r\n    this.identity = this._usuarioService.getIdentity();\r\n    this.idDocente = this.identity.persona_id;\r\n        \r\n\r\n        this._notasService.consultaNotas(this.idMateria,this.idDocente).subscribe(\r\n          response =>{\r\n              if(response && response['status']){\r\n                \r\n                this.nota = response['notas'];\r\n              }\r\n          },\r\n          error =>{\r\n            console.log(<any>error)\r\n          }\r\n        );\r\n        this._materiaService.consultaAlumno(this.idMateria,this.jwt).subscribe(\r\n          response => {\r\n            if(response && response['status']){\r\n              this.alumno = response['alumno'];\r\n            }\r\n          },error=>{\r\n            console.log(<any>error)\r\n          }\r\n    )\r\n\r\n  this._actividadService.consulta(this.idActividad,this.jwt).subscribe(\r\n    response =>{\r\n        if(response && response['status']){\r\n          this.actividad = response['actividad'][0];\r\n        }\r\n});\r\n\r\n}\r\n  enviar(texto) {\r\n\r\n    if(texto !=undefined ){\r\n      if(texto != ''){\r\n\r\n    this._notasService.enviar(this.idActividad,this.idMateria,this.idDocente,this.texto,this.idNota).subscribe(\r\n      response =>{\r\n        \r\n        if(response && response['status']){\r\n\r\n          this._notasService.consultaNotas(this.idMateria,this.idDocente).subscribe(\r\n            response =>{\r\n                if(response && response['status']){\r\n                  this.nota = response['notas'];\r\n          \r\n          }\r\n        })\r\n\r\n          if(response['idNota']){\r\n          this.idNota=response['idNota'];\r\n          }\r\n          alertify.success('<i class=\"fa fa-save\"></i>').dismissOthers(); \r\n        }else{\r\n          alertify.error('Error al enviar').dismissOthers(); \r\n        }\r\n    },error =>{\r\n      console.log(error)\r\n    }\r\n  );\r\n      }}\r\n}\r\n\r\neliminaNotas(id,index){\r\n    \r\n    this._notasService.elimina(id,this.jwt).subscribe(\r\n      response =>{\r\n          if(response && response['status']){\r\n            this.nota.splice(index,1);\r\n            alertify.success(response['msg']);\r\n          }\r\n          else{\r\n            alertify.success(response['msg']);\r\n          }\r\n  \r\n      },error =>{\r\n        console.log(<any>error)\r\n      });\r\n      \r\n  }  \r\n\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\n\r\nimport { NotasRoutingModule } from './notas-routing.module';\r\nimport { NotasComponent } from './notas.component';\r\nimport { CKEditorModule } from 'ckeditor4-angular';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\n@NgModule({\r\n  declarations: [NotasComponent],\r\n  imports: [\r\n    CommonModule,\r\n    NotasRoutingModule,\r\n    CKEditorModule,\r\n    FormsModule,\r\n  ],\r\n  exports: [NotasComponent]\r\n})\r\nexport class NotasModule { }\r\n","import { Injectable } from '@angular/core';\r\nimport { Http } from '@angular/http';\r\nimport { HttpClient } from '@angular/common/http';\r\n\r\nimport { GLOBAL } from 'src/app/services/global';\r\nimport { map } from 'rxjs/operators';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class NotasService {\r\n  public url: string;\r\n\r\n\r\n  constructor(\r\n    private _http: Http,\r\nprivate _httpClient: HttpClient\r\n  ) {\r\n    this.url = GLOBAL.url;\r\n   }\r\n\r\n   consultaNotas(materia_id,docente_id){\r\n\r\n    var params = '?id_materia='+materia_id;\r\n    params += '&id_docente='+docente_id;\r\n    \r\n    return this._httpClient.get(this.url +'/learning/notas/consulta.php'+params);\r\n  }\r\n\r\n   enviar(actividad_id,materia_id,docente_id,texto,nota_id=null){\r\n\r\n    let formData: FormData = new FormData(); \r\n    if(actividad_id){\r\n      formData.append('actividad_id', actividad_id);\r\n    }    \r\n    \r\n    formData.append('materia_id', materia_id);\r\n    formData.append('docente_id', docente_id);\r\n    formData.append('texto', texto);\r\n\r\n    if(!nota_id){\r\n      return this._httpClient.post(this.url +'learning/notas/crea.php',formData);\r\n    }\r\n  }\r\n\r\n  elimina(id,jwt){\r\n    var params = '?id_nota='+id;\r\n    params += '&jwt='+jwt;    \r\n    return this._httpClient.get(this.url +'learning/notas/elimina.php'+params);\r\n  }\r\n\r\n  consultaNotasMateria(materia_id,docente_id,jwt){\r\n\r\n    var params = '?id_materia='+materia_id;\r\n    params += '&id_docente='+docente_id;\r\n\r\n     params += '&jwt='+jwt;\r\n    \r\n    return this._httpClient.get(this.url +'/learning/notas/notasMateria.php'+params);\r\n  }\r\n  \r\n}\r\n"],"sourceRoot":""}