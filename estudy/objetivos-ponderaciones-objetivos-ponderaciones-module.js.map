{"version":3,"sources":["webpack:///./src/app/administracion/carga-actividades/asignatura/objetivos-ponderaciones/objetivos-ponderaciones-routing.module.ts","webpack:///./src/app/administracion/carga-actividades/asignatura/objetivos-ponderaciones/objetivos-ponderaciones.component.html","webpack:///./src/app/administracion/carga-actividades/asignatura/objetivos-ponderaciones/objetivos-ponderaciones.component.scss","webpack:///./src/app/administracion/carga-actividades/asignatura/objetivos-ponderaciones/objetivos-ponderaciones.component.ts","webpack:///./src/app/administracion/carga-actividades/asignatura/objetivos-ponderaciones/objetivos-ponderaciones.module.ts","webpack:///./src/app/administracion/carga-actividades/services/control-actividad.service.ts"],"names":[],"mappings":"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","file":"objetivos-ponderaciones-objetivos-ponderaciones-module.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\nimport { ObjetivosPonderacionesComponent } from './objetivos-ponderaciones.component';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: ObjetivosPonderacionesComponent\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class ObjetivosPonderacionesRoutingModule { }\r\n","module.exports = \" \\r\\n<div *ngIf=\\\"identificador == 1\\\">\\r\\n  <div class=\\\"row\\\">\\r\\n    <div class=\\\"col col-md-12\\\">\\r\\n      <table class=\\\"table table-bordered\\\">\\r\\n        <tr>\\r\\n          <th>{{'nmbActividad' | translate}}</th>\\r\\n          <th>{{'ponderacion' | translate}}</th>\\r\\n          <th>Objetivos de alumno</th>\\r\\n          <th>Objetivos de docente</th>\\r\\n          <th [hidden]=\\\"tipoAdmin == 0\\\">{{'guardarCambios' | translate}}</th>\\r\\n        </tr>\\r\\n        <tr [ngClass]=\\\"objetivos.grupo_id ? 'alert-warning':''\\\" *ngFor=\\\"let objetivos of objetivo\\\">\\r\\n          <td>{{objetivos.actividad_nombre}}</td>\\r\\n          <td>\\r\\n            <div class=\\\"form-group\\\">                               \\r\\n              <input disabled=\\\"disabled\\\" name=\\\"ponderacion\\\" [(ngModel)]=\\\"objetivos.ponderacion\\\" class=\\\"form-control\\\" id=\\\"ponderacion_{{objetivos.actividad_id}}\\\" type=\\\"number\\\">\\r\\n            </div>\\r\\n          </td>\\r\\n          <td>\\r\\n            <div class=\\\"form-group\\\">\\r\\n              <textarea name=\\\"objetivoAlumno\\\" [(ngModel)]=\\\"objetivos.objetivo_alumno\\\" rows=\\\"3\\\" cols=\\\"27\\\" maxlength=\\\"255\\\"></textarea>\\r\\n            </div>\\r\\n          </td>\\r\\n          <td>\\r\\n            <div class=\\\"formGroup\\\">\\r\\n                <textarea name=\\\"objetivoDocente\\\" [(ngModel)]=\\\"objetivos.objetivo_docente\\\" rows=\\\"3\\\" cols=\\\"27\\\" maxlength=\\\"255\\\"></textarea>\\r\\n            </div>\\r\\n          </td>\\r\\n          <td [hidden]=\\\"tipoAdmin == 0\\\" class=\\\"text-center\\\"><button class=\\\"btn btn-success\\\" (click)=\\\"guardarDatos(objetivos, objetivos.actividad_id, objetivos.objetivos_actividad_id)\\\"><i class=\\\"fa fa-save\\\"></i></button></td>\\r\\n        </tr>\\r\\n      </table>  \\r\\n    </div>\\r\\n  </div> \\r\\n</div>\\r\\n<div *ngIf=\\\"identificador == 0\\\">\\r\\n  <div class=\\\"alert alert-danger\\\">\\r\\n    <p class=\\\"text-center\\\">{{'MsgAsignaturaVacia' | translate}}\\r\\n      <br>\\r\\n      <a [routerLink]=\\\"['/admin/carga/asignatura/'+idAsignatura+'/modulos']\\\" class=\\\"btn btn-danger\\\">Crear actividades</a>\\r\\n    </p>\\r\\n    \\r\\n  </div>\\r\\n</div>\\r\\n\"","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2FkbWluaXN0cmFjaW9uL2NhcmdhLWFjdGl2aWRhZGVzL2FzaWduYXR1cmEvb2JqZXRpdm9zLXBvbmRlcmFjaW9uZXMvb2JqZXRpdm9zLXBvbmRlcmFjaW9uZXMuY29tcG9uZW50LnNjc3MifQ== */\"","import { Component, OnInit } from '@angular/core';\r\nimport { UsuarioService } from 'src/app/services/usuario.service';\r\nimport { ControlActividadService } from '../../services/control-actividad.service';\r\nimport { ActivatedRoute, Router, NavigationEnd } from '@angular/router';\r\n\r\ndeclare var alertify;\r\n\r\n@Component({\r\n  selector: 'app-objetivos-ponderaciones',\r\n  templateUrl: './objetivos-ponderaciones.component.html',\r\n  styleUrls: ['./objetivos-ponderaciones.component.scss']\r\n})\r\nexport class ObjetivosPonderacionesComponent implements OnInit {\r\n  jwt: string;\r\n  changeURL;\r\n\r\n  idAsignatura;\r\n  asignatura\r\n  \r\n  ponderacionTotal;\r\n  _actividades;\r\n  _identificador;\r\n  identificador;\r\n  objetivo;\r\n  tipoAdmin;\r\n  constructor(\r\n    private _usuarioService: UsuarioService,\r\n    private _actividadService: ControlActividadService,\r\n    private route: ActivatedRoute,\r\n    private router: Router\r\n  ){\r\n    \r\n   }\r\n\r\n  ngOnInit() {\r\n    this.idAsignatura = this.route.snapshot.parent.parent.paramMap.get('id');\r\n    let identity = this._usuarioService.getIdentity();\r\n    if(identity.administrador)\r\n      this.tipoAdmin = identity.administrador.edicion;\r\n    else\r\n      this.tipoAdmin =1;;\r\n        this.consultaTabla(this.idAsignatura);\r\n\r\n    this.changeURL = this.router.events.subscribe(val => {\r\n      if (val instanceof NavigationEnd){                        \r\n        if(val.url == val.urlAfterRedirects){\r\n        this.idAsignatura = this.route.snapshot.paramMap.get('id');\r\n        this.jwt = this._usuarioService.getJWT();\r\n        \r\n        this.consultaTabla(this.idAsignatura);\r\n        }\r\n        \r\n      }\r\n    });  \r\n    \r\n\r\n  }\r\n\r\n\r\n\r\n  consultaObjetivos(){\r\n    this._actividadService.consultaObjetivosActividad(this.jwt, this.idAsignatura ).subscribe(\r\n      response =>{\r\n          if(response && response['status']){\r\n\r\n            this.objetivo = response['objetivos']\r\n            this.objetivo.forEach(_objetivo => {\r\n              if(!_objetivo.objetivo_alumno)\r\n                _objetivo.objetivo_alumno = \"\";\r\n              if (!_objetivo.objetivo_docente) \r\n                _objetivo.objetivo_docente = \"\";\r\n            });\r\n          }\r\n      },error =>{\r\n        console.log(<any>error)\r\n      });\r\n  }\r\n\r\n  \r\n\r\n  consultaTabla(idAsignatura){\r\n    this._actividadService.consultaActividades(idAsignatura).subscribe(\r\n      response =>{\r\n        this.ponderacionTotal = 0\r\n          if(response && response['status']){\r\n            console.log(response)\r\n            this.identificador = 1;\r\n            this._actividades = response['Actividades']  \r\n            this.consultaObjetivos();    \r\n            \r\n          }else{\r\n            this.identificador = 0;\r\n          }\r\n      },error =>{\r\n        console.log(<any>error)\r\n      });\r\n  }\r\n\r\n  catalogoPadre(_actividad, id){\r\n    let actividadTmp = _actividad.filter(actividad=>actividad.actividad_id != id);\r\n    return actividadTmp;\r\n  }\r\n\r\n  guardarDatos(actividad, id_actividad, objetivos_actividad_id){\r\n    if (!objetivos_actividad_id) {\r\n      objetivos_actividad_id = 0\r\n      console.log(objetivos_actividad_id)\r\n    }\r\n    this._actividadService.guardaObjetivosPonderacion(actividad, this.jwt, id_actividad, objetivos_actividad_id ).subscribe(\r\n      response =>{\r\n          if(response && response['status']){\r\n            alertify.success(response['msg'])\r\n            this.consultaObjetivos();\r\n          }\r\n      },error =>{\r\n        console.log(<any>error)\r\n      });\r\n  }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\n\r\nimport { ObjetivosPonderacionesRoutingModule } from './objetivos-ponderaciones-routing.module';\r\nimport { ObjetivosPonderacionesComponent } from './objetivos-ponderaciones.component';\r\nimport { LanguageTranslationModule } from 'src/app/shared/modules/language-translation/language-translation.module';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\n@NgModule({\r\n  declarations: [ObjetivosPonderacionesComponent],\r\n  imports: [\r\n    CommonModule,\r\n    ObjetivosPonderacionesRoutingModule,\r\n    LanguageTranslationModule,\r\n    FormsModule\r\n  ]\r\n})\r\nexport class ObjetivosPonderacionesModule { }\r\n","import { Injectable } from '@angular/core';\r\nimport { Http } from '@angular/http';\r\nimport { HttpClient } from '@angular/common/http';\r\n\r\nimport { GLOBAL } from 'src/app/services/global';\r\nimport { map } from 'rxjs/operators';\r\n\r\ndeclare var alertify\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class ControlActividadService {\r\npublic url: string;\r\npublic jwt: string;\r\n  \r\n\r\n  constructor(\r\n    private _http: Http,\r\nprivate _httpClient: HttpClient\r\n  ){\r\n    this.url = GLOBAL.url\r\n   }\r\n   guardaObjetivosPonderacion(actividad,jwt, id_actividad, id_objetivo_actividad){\r\n     console.log(id_objetivo_actividad)\r\n\r\n    let formData: FormData = new FormData(); \r\n\r\n    formData.append('jwt', jwt);\r\n    formData.append('objetivo_docente',actividad.objetivo_docente);\r\n    formData.append('objetivo_alumno',actividad.objetivo_alumno);\r\n    formData.append('id_objetivos_actividad',id_objetivo_actividad);\r\n    formData.append('id_actividad',id_actividad);\r\n\r\n\r\n\r\n      \r\n    return this._httpClient.post(this.url +'learning/actividad/editaObjetivos.php',formData);\r\n\r\n  }\r\n\r\n  reasignarCalificacion(jwt,id_actividad,tipo_calificacion){\r\n\r\n    let formData: FormData = new FormData(); \r\n\r\n    formData.append('jwt', jwt);\r\n    formData.append('id_actividad',id_actividad);\r\n    formData.append('tipo_calificacion',tipo_calificacion);\r\n\r\n\r\n\r\n      \r\n    return this._httpClient.post(this.url +'learning/administracion/reasignaCalificacionActividad.php',formData);\r\n  }\r\n\r\n  consultaActActual(jwt){\r\n    var params = '?jwt='+jwt;\r\n    // params += '&jwt='+jwt;    \r\n    return this._httpClient.get(this.url +'learning/alumno/ultimaActividadContestada.php'+params);;\r\n  }\r\n\r\n   consultaObjetivosActividad(jwt, id_asignatura){\r\n    var params = '?jwt='+jwt;\r\n    params += '&id_asignatura='+id_asignatura;\r\n    return this._httpClient.get(this.url +'learning/asignatura/consultaObjetivos.php'+params);\r\n  }\r\n\r\n   consultaActividades(idAsignatura){\r\n    var params = '?id_asignatura='+idAsignatura;\r\n    return this._httpClient.get(this.url +'learning/asignatura/consultaActividades.php'+params);\r\n  }\r\n\r\n  consultaActividadDocente(idAsignatura,jwt){\r\n    var params = '?id_asignatura='+idAsignatura;\r\n     params += '&jwt='+jwt;    \r\n    return this._httpClient.get(this.url +'learning/asignatura/consultaActividadesDocente.php'+params);\r\n  }\r\n  \r\n\r\n  modificaActividad(actividad){\r\n \r\n    let formData: FormData = new FormData(); \r\n    formData.append('id_actividad', actividad.actividad_id);\r\n    \r\n    if (actividad.actividad_padre_id != \"\") {\r\n      formData.append('id_actividad_padre', actividad.actividad_padre_id); \r\n    }\r\n    \r\n    if(actividad.fecha_inicio){\r\n      formData.append('fecha_inicio', actividad.fecha_inicio);\r\n    }\r\n    if (actividad.fecha_fin) {\r\n      formData.append('fecha_fin', actividad.fecha_fin);\r\n    }\r\n    if (actividad.ponderacion) {\r\n      formData.append('ponderacion', actividad.ponderacion);\r\n    }\r\n\r\n    var fd = new FormData();\r\n\r\n      return this._httpClient.post(this.url +'learning/actividad/editaControl.php',formData);\r\n\r\n  }\r\n\r\n  \r\n  guardaPonderaciones(id_asignatura,actividades,idRol){\r\n\r\n    let formData: FormData = new FormData;\r\n\r\n    formData.append('id_asignatura', id_asignatura);\r\n    \r\n    \r\n    actividades.forEach(function(actividad){\r\n      if(actividad.tipo ==\"2\" || idRol == \"1\"){\r\n        formData.append('ponderacion[]', actividad.ponderacion);\r\n        formData.append('id_actividad[]', actividad.actividad_id);\r\n      }\r\n    });\r\n        \r\n    var fd = new FormData();\r\n\r\n    return this._httpClient.post(this.url +'learning/asignatura/guardaPonderaciones.php',formData);\r\n  }\r\n  \r\n\r\n\r\n}\r\n"],"sourceRoot":""}